#!/usr/bin/env python3

import argparse

from swin_latex import commands

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    subparsers = parser.add_subparsers()

    init = subparsers.add_parser('init')
    init.set_defaults(func=commands.initialize_project)
    init.add_argument('-o', '--overwrite', action='store_true',
                      help='Overwrites existing files and folders if a project already '
                           'exists')
    init.add_argument('-g', '--gitignore', action='store_true',
                      help='Creates a LaTeX .gitignore file in the project root')
    init.add_argument('-b', '--bibtex', action='store_true',
                      help='Creates a blank bibtex bibliography file in the project root')

    init.add_argument('--author', default="Author", type=str, help='The authors name')
    init.add_argument('--title', default="Title", type=str, help='The papers title')
    init.add_argument('--unit-code', default="XXXXXXXXXX", type=str,
                      help='The unit code of the subject the paper is for')
    init.add_argument('--unit-name', default="Unit", type=str,
                      help='The name of the subject the paper is for')
    init.add_argument('--student-id', default="0000000000", type=str,
                      help='Your student ID')
    init.add_argument('--semester', type=int, default=1,
                      help='The semester being currently undertaken')

    init.add_argument('--subtitle', type=str, help='An optional subtitle to add to '
                                                   'the title')

    new_section = subparsers.add_parser('new-section')
    new_section.set_defaults(func=commands.create_section)
    new_section.add_argument('name', default="", type=str, help='The section title')

    args = parser.parse_args()
    if len(vars(args)) > 0:
        args.func(args)
    else:
        parser.print_help()
